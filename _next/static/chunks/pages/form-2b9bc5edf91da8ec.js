(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{3606:function(e,t,r){"use strict";var n,l=r(7294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=(0,l.forwardRef)(function(e,t){return l.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.6 18.6",ref:t},e),n||(n=l.createElement("path",{d:"m11.4 9.3 6.7-6.7c.6-.6.6-1.5 0-2.1s-1.5-.6-2.1 0L9.3 7.2 2.6.4C2-.1 1-.1.4.4-.1 1-.1 2 .4 2.6l6.7 6.7L.4 16c-.6.6-.6 1.5 0 2.1s1.5.6 2.1 0l6.7-6.7 6.7 6.7c.6.6 1.5.6 2.1 0s.6-1.5 0-2.1l-6.6-6.7z"})))});t.Z=s},3207:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/form",function(){return r(890)}])},5905:function(e,t,r){"use strict";r.d(t,{c:function(){return x}});var n=r(7294);let l=e=>{let t=Array.isArray(e)?[]:{};if("object"!=typeof e||null===e||e instanceof Date)return e;for(let r in e)t[r]=l(e[r]);return t},a=(e,t,r)=>{let n=t.split(".");return void 0!==e[n[0]]&&(1===n.length?"function"==typeof r?(e[n[0]]=r(e[n[0]]),!0):(e[n[0]]=r,!0):a(e[n[0]],n.slice(1).join("."),r))},s=(e,t,r)=>{let n=t.split(".");if(void 0===e[n[0]])return!1;if(1===n.length){if("function"==typeof r)return e[n[0]]=r(e[n[0]]),!0;if(Array.isArray(e[n[0]]))return e[n[0]].push(r),!0;if("object"==typeof e[n[0]]&&"object"==typeof r)return e[n[0]]={...l(e[n[0]]),...l(r)},!0}return s(e[n[0]],n.slice(1).join("."),r)},i=(e,t,r)=>{let n=t.split(".");return void 0!==e[n[0]]&&(1===n.length?("function"==typeof r&&r(e[n[0]]),delete e[n[0]],!0):i(e[n[0]],n.slice(1).join("."),r))},o=(e,t,r)=>{let n=t.split(".");return void 0!==e[n[0]]&&(1===n.length?!!Array.isArray(e[n[0]])&&(void 0!==r&&r>=0?(e[n[0]].splice(r,1),!0):(e[n[0]].pop(),!0)):void 0)},u=(e,t)=>{let r=t.split(".");return void 0===e[r[0]]?void 0:1===r.length?e[r[0]]:u(e[r[0]],r.slice(1).join("."))},c=(e,t,r)=>{let n=l(e);return a(n,t,r),n},d=(e,t,r)=>{let n=l(e);return s(n,t,r),n},p=(e,t,r)=>{let n=l(e);return o(n,t,r),n},x=e=>{let{initialValues:t,validate:r}=e,l=(0,n.useMemo)(()=>t,[t]),[a,s]=(0,n.useState)(!1),[i,o]=(0,n.useState)(t),[x,f]=(0,n.useState)([]),m=(0,n.useCallback)((e,t)=>{f(r=>{if(!t)return r.filter(t=>t.field!==e);let n=r.findIndex(t=>t.field===e);return -1===n?[...r,{field:e,errors:t}]:[...r.slice(0,n),{field:e,errors:t},...r.slice(n+1)]})},[f]),[h,v]=(0,n.useState)([]),g=(0,n.useCallback)((e,t)=>{v(r=>t?[...r.filter(t=>t.field!==e),{field:e,state:t}]:r.filter(t=>t.field!==e))},[v]),y=(0,n.useCallback)(()=>{o(l),v([]),f([])},[l,o,v,f]),b=(0,n.useCallback)(e=>{o(e)},[o]),w=(0,n.useCallback)((e,t)=>{o(r=>c(r,e,t))},[o]),j=(0,n.useCallback)(e=>u(i,e),[i]),C=(0,n.useCallback)((e,t)=>{o(r=>d(r,e,t))},[o]),N=(0,n.useCallback)((e,t)=>{o(r=>p(r,e,t))},[o]),E=(0,n.useCallback)(e=>{var t,r;return{state:[j(e),t=>w(e,t)],touched:[null===(t=h.find(t=>t.field===e))||void 0===t?void 0:t.state,t=>g(e,t)],errors:null===(r=x.find(t=>t.field===e))||void 0===r?void 0:r.errors}},[j,w,h,g,x]);return{values:i,submitted:[a,s],_touched:h,setFieldsTouched:v,setFieldTouched:g,_errors:x,setFieldsErrors:f,setFieldError:m,resetValues:y,setValues:b,setFieldValue:w,getFieldValue:j,getFieldProps:E,insertFieldValue:C,removeFieldValue:N}}},191:function(e,t,r){"use strict";r.d(t,{r:function(){return l}});var n=r(7294);let l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.useCallback)(e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})},[t])}},890:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ew}});var n,l,a,s,i,o,u,c,d=r(5898),p=r(7294);function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f=(0,p.forwardRef)(function(e,t){return p.createElement("svg",x({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),n||(n=p.createElement("path",{stroke:"#CCC",strokeWidth:2,d:"M0 6.7h14M6.7 14V0"})))});function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var h=(0,p.forwardRef)(function(e,t){return p.createElement("svg",m({width:14,height:2,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),l||(l=p.createElement("path",{stroke:"#CCC",strokeWidth:2,d:"M0 1h14"})))});let v=e=>{let{label:t,required:r,measure:n,state:l,initialValue:a,max:s,min:i,errors:o}=e,[u,c]=(0,p.useState)(null!=a?a:NaN),[x,m]=null!=l?l:[],v=null!=x&&null!=m?x:u,g=(0,p.useId)(),y=(0,p.useCallback)(e=>{let t=null!=x?x+e:u+e;return null!=x&&null!=m&&isNaN(x)?m(null!=i?i:x):null==x&&null==m&&isNaN(u)?c(null!=i?i:u):null!=i&&!isNaN(i)&&t<i||null!=s&&!isNaN(s)&&t>s?null!=x&&null!=m?m(x):c(u):null!=m&&null!=x?m(t):c(t)},[x,u,m,c,i,s]);return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center mb-2",children:[(0,d.jsx)("label",{className:"font-medium text-[16px] leading-none uppercase text-[#1D2E5B]",htmlFor:g,children:t}),(0,d.jsx)("span",{className:"font-medium text-[16px] leading-none uppercase text-[#1D2E5B] opacity-30 text-right ml-auto shrink-0",children:n})]}),(0,d.jsxs)("div",{className:"flex border-[1px] rounded-md bg-white text-center ".concat(o?"text-[#FF0000] border-[#FF0000]":"text-[#1D2E5B] border-[#CBCED9]"),children:[(0,d.jsx)("button",{className:"bg-transparent p-4 shrink-0",type:"button",onClick:()=>y(-1),children:(0,d.jsx)(h,{width:14,height:1})}),(0,d.jsx)("input",{max:null!=s?s:"",min:null!=i?i:"",required:r,type:"number",id:g,autoComplete:"off",inputMode:"numeric",value:isNaN(v)?"":v,onChange:e=>m?m(parseInt(e.target.value)):c(parseInt(e.target.value)),className:"appearance-none border-none text-center bg-transparent grow shrink min-w-0 font-medium"}),(0,d.jsx)("button",{className:"bg-transparent p-4 shrink-0",onClick:()=>y(1),type:"button",children:(0,d.jsx)(f,{width:14,height:14})})]}),o&&(0,d.jsx)("p",{className:"p-2 px-3 text-[#FF0000] bg-[#FFEFEF] rounded-b-md",children:o})]})};v.displayName="Input.Number";let g=(0,p.createContext)({steps:[],dispatchSteps:()=>{},activeStep:NaN,setActiveStep:()=>{}});g.displayName="Stepper.Context";let y=e=>{let{title:t,id:r,number:n,activeStep:l,setActiveStep:a}=e;return(0,d.jsx)("li",{children:(0,d.jsx)("a",{className:"block rounded-full m-2 w-[5px] h-[5px] bg-[#1D2E5B] ".concat(n===l?"opacity-100":"opacity-30"),href:"#form-steps-".concat(r),"aria-label":"Перейти на шаг ".concat(t),onClick:()=>a(n)})})};y.displayName="Stepper.Control";let b=()=>{let{steps:e,activeStep:t,setActiveStep:r}=(0,p.useContext)(g);return(0,d.jsx)("nav",{className:"ml-auto",children:(0,d.jsx)("ol",{className:"flex items-center flex-wrap",children:e.map(e=>{let{id:n,number:l}=e;return(0,d.jsx)(y,{title:n,id:n,number:l,activeStep:t,setActiveStep:r},n)})})})};b.displayName="Stepper.Controls";let w=e=>{let{children:t,title:r,number:n,active:l,completed:a,description:s,...i}=e,o=(0,p.useId)(),u=(0,p.useRef)(null),[c,x]=(0,p.useState)(null),[f,m]=(0,p.useState)(null),[h,v]=(0,p.useState)(!1),[y,b]=(0,p.useState)(!1),{steps:w,activeStep:j,dispatchSteps:C,setActiveStep:N}=(0,p.useContext)(g);return(0,p.useEffect)(()=>(C({type:"ADD_STEP",payload:{id:o,ref:u,number:n}}),()=>{C({type:"REMOVE_STEP",payload:{id:o,ref:u,number:n}})}),[C,o,u,n]),(0,p.useEffect)(()=>{let e=w.findIndex(e=>e.id===o)+1,t=w.findIndex(e=>e.id===o)-1;e<w.length?m(w[e]):m(null),t>=0?x(w[t]):x(null),-1===t?v(!0):v(!1),e===w.length?b(!0):b(!1)},[w,x,m,v,b,o]),j===n?(0,d.jsxs)("li",{ref:u,id:"form-steps-".concat(o),className:"p-5 space-y-5 bg-white rounded-xl",children:[(0,d.jsxs)("p",{className:"text-[#1D2E5B] font-bold text-[20px] leading-none",children:["Шаг ",n,". ",(0,d.jsx)("br",{})," ",r]}),(0,d.jsx)("p",{className:"text-[16px] leading-[22px] text-[#444444]",children:s}),(0,d.jsx)("div",{className:"space-y-5",children:t}),(0,d.jsxs)("nav",{className:"space-y-2",children:[y?(0,d.jsx)("button",{className:"bg-[#FFD74B] px-4 py-3 rounded-full w-full uppercase font-bold text-[17px] leading-[17px] block text-center",type:"submit",children:"Отправить"}):f&&(0,d.jsx)("a",{onClick:()=>N(f.number),href:f?"#form-steps-".concat(f.id):"#",className:"bg-[#FFD74B] px-4 py-3 rounded-full w-full uppercase font-bold text-[17px] leading-[17px] block text-center",children:"Следующий шаг"}),!h&&c&&(0,d.jsx)("a",{href:c?"#form-steps-".concat(c.id):"#",onClick:()=>N(c.number),className:"px-4 py-3 rounded-full w-full uppercase font-bold text-[17px] leading-[17px] block text-center",children:"На шаг назад"})]})]}):(0,d.jsx)(d.Fragment,{})};w.displayName="Stepper.Step";let j=e=>{let{children:t,...r}=e;return(0,d.jsx)("ol",{className:"space-y-5",...r,children:t})};j.displayName="Stepper.Steps";let C=(e,t)=>{let{type:r,payload:n}=t;if("ADD_STEP"===r){let{id:l,ref:a,number:s}=n;if(!e.find(e=>e.id===l))return[...e,{id:l,ref:a,number:s}]}return e},N=e=>{let{children:t,activeStep:r,...n}=e,[l,a]=(0,p.useState)(r),[s,i]=(0,p.useReducer)(C,[]);return(0,d.jsx)(g.Provider,{value:{steps:s,dispatchSteps:i,activeStep:l,setActiveStep:a},children:t})};N.displayName="Stepper",N.Step=w,N.Steps=j,N.Controls=b;let E=(e,t,r)=>new Date(e,t,r).getDay(),D=()=>new Date(new Date().setHours(0,0,0,0)),k=e=>{let{locale:t,style:r="short"}=e,n=[];for(let l=3;l<10;l++){let a=new Date("2000-01-0".concat(l));n.push(a.toLocaleDateString(t,{weekday:r}))}return n},F=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Date(Math.min(...t.map(e=>{let t=new Date(e);return t.setHours(0,0,0,0),t.getTime()})))},S=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Date(Math.max(...t.map(e=>{let t=new Date(e);return t.setHours(0,0,0,0),t.getTime()})))},O=e=>{let{firstDate:t,secondDate:r}=e,n=new Date(t),l=new Date(r);return n.setHours(0,0,0,0),l.setHours(0,0,0,0),Math.abs(n.getTime()-l.getTime())/864e5},T=e=>{let{year:t,month:r,mode:n="month"}=e,l=[],a=[],s=E(t,r,1);0===s&&(s=7);for(let i=s-2;i>=0;i--){let o=new Date(t,r,-1*i,0,0,0,0);l.push(o)}let u=42-s;for(let c=1;c<=u+1;c++){let d=new Date(t,r,c,0,0,0,0);l.push(d)}if("month"===n)for(let p=0;p<l.length;p++)l[p].getMonth()!=r&&(l[p]=null);for(let x=0;x<l.length;x+=7)a.push(l.slice(x,x+7));return a},R=e=>{let{firstDate:t,secondDate:r}=e,n=new Date(t),l=new Date(r);return n.setHours(0,0,0,0),l.setHours(0,0,0,0),n.getTime()===l.getTime()},M=e=>{let{compared:t,border:r,includeBorder:n=!1}=e,l=new Date(t),a=new Date(r);return l.setHours(0,0,0,0),a.setHours(0,0,0,0),n?l.getTime()>=a.getTime():l.getTime()>a.getTime()},B=e=>{let{compared:t,border:r,includeBorder:n=!1}=e,l=new Date(t),a=new Date(r);return l.setHours(0,0,0,0),a.setHours(0,0,0,0),n?l.getTime()<=a.getTime():l.getTime()<a.getTime()},I=e=>{let{compared:t,leftBorder:r,rightBorder:n,includeLeftBorder:l=!0,includeRightBorder:a=!0}=e;return!!(M({compared:t,border:r,includeBorder:l})&&B({compared:t,border:n,includeBorder:a}))},_=(e,t)=>{let r=new Date(e.getTime());return r.setDate(2),r.setHours(0,0,0,0),r.setMonth(t),r},L=(e,t)=>{let r=new Date(e.getTime());return r.setHours(0,0,0,0),r.setDate(t),r};function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var P=(0,p.forwardRef)(function(e,t){return p.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 34",ref:t},e),a||(a=p.createElement("path",{d:"M14.4 17 .4 2.6C-.1 2-.1 1 .4.4 1-.2 1.9-.2 2.5.4l15.1 15.5c.6.6.6 1.6 0 2.1L2.5 33.6c-.3.3-.7.4-1 .4s-.8-.1-1-.4c-.6-.6-.6-1.6 0-2.1L14.4 17z"})))});function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var U=(0,p.forwardRef)(function(e,t){return p.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 34",ref:t},e),s||(s=p.createElement("path",{d:"m3.6 17 14-14.4c.6-.6.6-1.6 0-2.1-.6-.6-1.5-.6-2.1 0L.4 15.9c-.6.6-.6 1.6 0 2.1l15.1 15.5c.3.3.7.4 1 .4s.8-.1 1-.4c.6-.6.6-1.6 0-2.1L3.6 17z"})))});let z=e=>{let{calendarCurrentDate:t,dispatchCalendarCurrentDate:r,calendarLocale:n="ru",...l}=e;return(0,d.jsxs)("thead",{className:"grid",...l,children:[(0,d.jsx)("tr",{children:(0,d.jsxs)("th",{className:"flex items-center py-2",colSpan:7,children:[(0,d.jsx)("button",{type:"button",className:"p-2 shrink-0",onClick:()=>r({type:"PREVIOUS_MONTH"}),children:(0,d.jsx)(U,{width:9,height:18})}),(0,d.jsxs)("p",{className:"capitalize grow font-bold text-[#1D2E5B] text-[20px] leading-none",children:[t.toLocaleString(n,{month:"long"})," ",t.getFullYear()]}),(0,d.jsx)("button",{type:"button",className:"p-2 shrink-0",onClick:()=>r({type:"NEXT_MONTH"}),children:(0,d.jsx)(P,{width:9,height:18})})]})}),(0,d.jsx)("tr",{className:"grid grid-cols-7",children:k({locale:n}).map((e,t)=>(0,d.jsx)("th",{className:"capitalize",children:e},t))})]})};z.displayName="Calendar.Header";let V=e=>{let{value:t,calendarInitialDate:r,calendarValue:n,setCalendarValue:l,...a}=e,s=(0,p.useCallback)(()=>{if(!B({compared:t,border:r})){if(n.every(e=>null==e))return l([t,null]);if(null==n[0])return l([t,n[1]]);if(null==n[1])return l([n[0],t]);if(n.every(e=>null!=e)&&R({firstDate:n[0],secondDate:t})&&R({firstDate:n[1],secondDate:t})&&n.some(e=>R({firstDate:e,secondDate:t})))return l([null,null]);if(n.some(e=>null!=e&&R({firstDate:e,secondDate:t}))){let e=n.map(e=>null!=e&&R({firstDate:e,secondDate:t})?null:e);return l(e)}}},[t,n,r,l]);return(0,d.jsx)("td",{className:"block form-calendar-control-cell",...a,children:(0,d.jsx)("button",{type:"button",onClick:s,className:"form-calendar-control",tabIndex:B({compared:t,border:r})?-1:0,"data-allowed":M({compared:t,border:r,includeBorder:!0}),"data-selected":n.some(e=>null!=e&&R({firstDate:e,secondDate:t})),"data-in-range":n.every(e=>null!=e)&&I({compared:t,leftBorder:F(...n),rightBorder:S(...n)}),children:t.getDate()})})};V.displayName="Calendar.Day";let Y=e=>{let{value:t,calendarCurrentDate:r,calendarInitialDate:n,calendarValue:l,setCalendarValue:a,...s}=e;return(0,d.jsx)("tr",{className:"grid grid-cols-7 auto-cols-fr form-calendar-control-row",...s,children:t.map((e,t)=>e?(0,d.jsx)(V,{value:e,calendarInitialDate:n,calendarValue:l,setCalendarValue:a},"_"+e.getTime()):(0,d.jsx)("td",{},t))})};Y.displayName="Calendar.Week";let Z=e=>{let{calendarCurrentDate:t,calendarInitialDate:r,calendarValue:n,setCalendarValue:l,...a}=e;return(0,d.jsx)("tbody",{className:"grid auto-rows-fr mr-[-4px]",...a,children:T({year:t.getFullYear(),month:t.getMonth(),mode:"fill"}).map((e,a)=>(0,d.jsx)(Y,{value:e,calendarCurrentDate:t,calendarInitialDate:r,calendarValue:n,setCalendarValue:l},a))})};Z.displayName="Calendar.Body";let W=(e,t)=>{switch(t.type){case"PREVIOUS_MONTH":return _(e,e.getMonth()-1);case"NEXT_MONTH":return _(e,e.getMonth()+1);default:return e}},X=e=>{let{state:t,initialValue:r=D()}=e,[n,l]=(0,p.useReducer)(W,r),[a,s]=(0,p.useState)([n,n]),[i,o]=null!=t?t:[],u=(0,p.useCallback)(e=>null!=o&&null!=i?o(e):s(e),[i,o,s]);return(0,d.jsxs)("table",{className:"text-center w-full",children:[(0,d.jsx)(z,{calendarCurrentDate:n,dispatchCalendarCurrentDate:l}),(0,d.jsx)(Z,{calendarInitialDate:r,calendarCurrentDate:n,calendarValue:null!=i&&null!=o?i:a,setCalendarValue:u})]})};X.displayName="Calendar";let G=e=>{let{state:t,errors:r}=e,n=(0,p.useMemo)(()=>D(),[]),[l,a]=(0,p.useState)([n,L(n,n.getDate()+2)]),[s,i]=null!=t?t:[],o=null!=s&&null!=i?s:l,u=(0,p.useCallback)(e=>{let t=o.filter(e=>null!=e);if(0===t.length)return;let r=F(...t);if(e<0||isNaN(e))return null!=i?i([r,null]):a([r,null]);let n=L(r,r.getDate()+e);null!=i?i([r,n]):a([r,n])},[o,a,i]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{state:[o.every(e=>null!=e)?O({firstDate:o[0],secondDate:o[1]}):NaN,u],measure:"Дн.",min:1,label:"Длительность:",errors:r}),(0,d.jsx)(X,{state:[o,null!=i?i:a]})]})};G.whyDidYouRender=!0,G.displayName="Input.Duration";let q=()=>{let e=new Date().getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let n=16*Math.random();return e>0?(n=(e+n)%16|0,e=Math.floor(e/16)):(n=(t+n)%16|0,t=Math.floor(t/16)),("x"==r?n:7&n|8).toString(16)})},K=(0,p.createContext)({routes:[],dispatchRoutes:()=>{},errors:[]});K.displayName="Input.Routes.Context";var J=r(807);let Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,p.useRef)(null),n=t=>{var n;(null===(n=r.current)||void 0===n?void 0:n.contains(t.target))||e(t)};return(0,p.useEffect)(()=>{if(r&&r.current)return document.addEventListener("click",n),()=>{document.removeEventListener("click",n)}},[r,...t]),r},$=(0,p.createContext)({controlRef:{current:null},contentRef:{current:null},isDOMVisible:!1,isOpened:!1,trapFocus:!1,shouldCloseOnEscape:!0,strategy:"portal",setIsOpened:()=>{}});$.displayName="Popover.Context";var ee=r(191),et=r(6705);let er=(0,p.forwardRef)((e,t)=>{let{children:r,as:n="button",...l}=e,{isOpened:a,setIsOpened:s,controlRef:i}=(0,p.useContext)($),o=(0,ee.r)(i,t);return(0,d.jsx)(n||"button",{onClick:()=>s(e=>!e),...l,ref:o,children:r})});er.displayName="Popover.Control";let en=(0,et.U)(er);var el=r(3935);let ea=e=>{let{children:t,strategy:r}=e;return"parent"===r?(0,d.jsx)(d.Fragment,{children:t}):(0,el.createPortal)(t,document.body)},es=(0,p.forwardRef)((e,t)=>{let{children:r,className:n,...l}=e,{isOpened:a,setIsOpened:s,contentRef:i,controlRef:o,strategy:u,trapFocus:c,shouldCloseOnEscape:x,isDOMVisible:f}=(0,p.useContext)($),m=(0,ee.r)(i,t),h=e=>{var t,r;if(a&&!(null===(t=i.current)||void 0===t?void 0:t.contains(e.target))&&!(null===(r=o.current)||void 0===r?void 0:r.contains(e.target)))return s(!1)},v=e=>{if(a){if("Tab"===e.key&&e.shiftKey&&c&&document.activeElement===i.current){var t;return e.preventDefault(),null===(t=i.current)||void 0===t?void 0:t.focus()}if("Escape"===e.key&&x)return e.preventDefault(),s(!1)}},g=()=>{y()},y=(0,p.useCallback)(()=>{if(!i||!i.current||!o||!o.current)return;let{width:e,height:t,left:r,top:n}=o.current.getBoundingClientRect(),l="parent"===u?0:r+window.scrollX,a="parent"===u?0:n+window.scrollY;i.current.style.left=l+"px",i.current.style.top=a+t+"px";let{width:s,height:c,left:d,top:p}=i.current.getBoundingClientRect();Math.ceil(d+s)>=document.documentElement.clientWidth&&(i.current.style.left=l-s+e+"px"),Math.ceil(p+c)>=document.documentElement.clientHeight&&(i.current.style.top=a-c+"px")},[i,o,u]),b=(0,p.useMemo)(()=>new ResizeObserver(()=>y()),[y]);(0,p.useEffect)(()=>{if(i&&i.current&&o&&o.current){if(y(),a&&c){var e;null===(e=i.current)||void 0===e||e.focus()}return a?(b&&b.observe(i.current),document.addEventListener("keydown",v),document.addEventListener("click",h),window.addEventListener("resize",g)):(b&&b.unobserve(i.current),document.removeEventListener("keydown",v),document.removeEventListener("click",h),window.removeEventListener("resize",g)),()=>{b&&b.disconnect(),document.removeEventListener("click",h)}}},[i,o,a,u,b,c,x]);let w=(0,p.useCallback)(()=>{i&&i.current&&i.current.focus()},[i]);return f||a?(0,d.jsx)(ea,{strategy:u,children:(0,d.jsxs)("dialog",{open:a,style:{position:"absolute",margin:0,zIndex:300},className:n,...l,ref:m,tabIndex:0,children:[r,c&&(0,d.jsx)("div",{onFocus:w,tabIndex:0,className:"sr-only"})]})}):null});es.displayName="Popover.Content";let ei=e=>{let{children:t,isOpened:r,trapFocus:n=!1,isInitiallyOpened:l=!1,shouldCloseOnEscape:a=!0,isDOMVisible:s=!1,strategy:i="portal",onChange:o}=e,[u,c]=(0,p.useState)(l),x=(0,p.useRef)(null),f=(0,p.useRef)(null);return(0,p.useEffect)(()=>{o&&o(u)},[u,o]),(0,d.jsx)($.Provider,{value:{isOpened:null!=r?r:u,setIsOpened:null!=r?()=>{c(r)}:c,controlRef:x,contentRef:f,strategy:i,trapFocus:n,isDOMVisible:s},children:t})};function eo(){return(eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}ei.displayName="Popover",ei.Control=en,ei.Content=es;var eu=(0,p.forwardRef)(function(e,t){return p.createElement("svg",eo({xmlns:"http://www.w3.org/2000/svg",width:35,height:24,fill:"none",ref:t},e),i||(i=p.createElement("rect",{width:35,height:24,rx:4,fill:"#CBCED9"})),o||(o=p.createElement("path",{d:"M0 4a4 4 0 0 1 4-4h27a4 4 0 0 1 4 4v8H0V4Z",fill:"#EDEFF6"})),u||(u=p.createElement("path",{d:"M23.947 5.539 11.053 18.462M23.947 18.462 11.053 5.539",stroke:"red",strokeWidth:2,strokeLinecap:"round"})))});let ec=e=>{let{value:t}=e,[r,n]=(0,p.useState)(!1),[l,a]=(0,p.useState)(!1),s=(0,p.useMemo)(()=>{if(!t||!t.length)return;a(!1),n(!1);let e=J.oB.find(e=>{var r;return(null===(r=e[2])||void 0===r?void 0:r.toLowerCase())===(null==t?void 0:t.toLowerCase())});if(e&&e.length&&e[0])return e[0].toLowerCase()},[t,n,a]);return(0,d.jsxs)(d.Fragment,{children:[s&&(0,d.jsx)("img",{crossOrigin:"anonymous",className:"absolute object-contain ".concat(r?"opacity-100":"opacity-0"),src:"https://countryflagsapi.com/svg/".concat(s),alt:"Иконка страны ".concat(t),onError:()=>a(!0),onLoad:()=>{n(!0),a(!1)},loading:"lazy"}),!r&&!l&&s&&(0,d.jsxs)("svg",{"aria-hidden":"true",className:"text-gray-200 animate-spin fill-[#1D2E5B]",viewBox:"0 0 100 101",fill:"none",width:20,height:20,xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,d.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(l||!s)&&(0,d.jsx)(eu,{width:35,height:24})]})};function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ep=(0,p.forwardRef)(function(e,t){return p.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 9",ref:t},e),c||(c=p.createElement("path",{d:"M8.5 7.2 1.3.2A.8.8 0 0 0 .2.2c-.3.3-.3.8 0 1L8 8.8c.3.3.8.3 1.1 0l7.7-7.5.2-.6-.2-.5a.8.8 0 0 0-1.1 0l-7.2 7z"})))}),ex=r(3606);let ef=e=>{let{id:t,value:r,error:n}=e,[l,a]=(0,p.useState)(!1),[s,i]=(0,p.useState)(!1),{routes:o,dispatchRoutes:u}=(0,p.useContext)(K),c=(0,p.useRef)(null),x=Q(e=>{if(c&&c.current&&l&&!c.current.contains(e.target))return a(!1)},[l,a,c]),f=(0,p.useMemo)(()=>{let e=new Set;return J.tx.forEach(t=>{e.add(t.toLowerCase()[0])}),[...Array.from(e)].sort((e,t)=>e>t?1:-1)},[]),[m,h]=(0,p.useState)(f[0]);return(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)(ei,{shouldCloseOnEscape:!1,strategy:"parent",trapFocus:!0,isOpened:l,children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsxs)(ei.Control,{type:"button",className:"border-[1px] bg-white rounded px-2 py-3 truncate text-left grow uppercase font-medium text-[14px] leading-none flex items-center ".concat(n&&s?"text-[#FF0000] border-[#FF0000]":"text-[#1D2E5B] border-[#CBCED9]"," "),as:"button",ref:c,onClick:()=>{i(!0),a(e=>!e)},onFocus:()=>i(!0),onBlur:()=>i(!0),children:[(0,d.jsx)("p",{className:"pr-2 truncate",children:null!=r?r:"Выберите страну"}),(0,d.jsx)(ep,{fill:"currentColor",width:10,height:14,className:"ml-auto shrink-0"})]}),r&&(0,d.jsx)("div",{className:"border-[1px] border-l-0 rounded p-2 ".concat(n&&s?"border-[#FF0000]":"border-[#CBCED9]"),children:(0,d.jsx)("div",{className:"relative w-[35px] h-[24px] rounded overflow-hidden grid place-items-center place-content-center",children:(0,d.jsx)(ec,{value:r})})})]}),n&&s&&(0,d.jsx)("p",{className:"p-2 px-3 text-[#FF0000] bg-[#FFEFEF] rounded-b-md",children:n}),(0,d.jsx)(ei.Content,{ref:x,className:"p-0 border-[1px] w-full border-[#CBCED9] rounded-b",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("ul",{className:"grid grid-cols-5",children:f.map((e,t)=>(0,d.jsx)("li",{className:"border-[1px]",children:(0,d.jsx)("button",{className:"uppercase p-4 w-full h-full text-center text-[#1D2E5B] font-medium text-[14px] leading-none ".concat(m.toLowerCase()===e.toLowerCase()?"bg-[#EDEFF6]":"bg-white"),type:"button",onClick:()=>h(e),children:e})},t))}),(0,d.jsx)("ul",{className:"py-4 px-2 max-h-[210px] overflow-y-scroll space-y-2 text-[#444444]",children:J.tx.filter(e=>e[0].toLowerCase()===m.toLowerCase()&&!o.some(t=>t.country===e)).map((e,r)=>(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:()=>{u({type:"UPDATE_ROUTE",payload:{id:t,country:e}}),a(!1)},type:"button",children:e})},r))})]})})]}),o.length>1&&(0,d.jsx)("button",{type:"button",className:"bg-[#EDEFF6] w-[21px] h-[21px] rounded-full absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 grid place-content-center place-items-center","aria-label":"Удалить маршрут",onClick:()=>u({type:"DELETE_ROUTE",payload:{id:t}}),children:(0,d.jsx)(ex.Z,{fill:"#AFB0B5",width:9,height:9})})]})};ef.displayName="Input.Routes.Countries.Select";let em=()=>{let{routes:e,dispatchRoutes:t,errors:r}=(0,p.useContext)(K);return(0,d.jsxs)(d.Fragment,{children:[e.map(n=>{var l;let{id:a,country:s}=n,i=Array.isArray(r)?null===(l=null==r?void 0:r.find(e=>e.id===a&&"MISSING_COUNTRY"===e.type))||void 0===l?void 0:l.error:r;return(0,d.jsx)(ef,{value:s,id:a,routes:e,dispatchRoutes:t,error:i},a)}),(0,d.jsxs)("button",{className:"border-[1px] border-[#e1e4f1] bg-[#EDEFF6] rounded px-2 py-3 w-full uppercase font-medium text-[#1D2E5B] text-[14px] leading-none text-left flex items-center truncate",type:"button",onClick:()=>t({type:"ADD_ROUTE",payload:{id:q(),country:null,activity:null}}),children:[(0,d.jsx)("span",{className:"pr-2 truncate",children:"Добавить страну"}),(0,d.jsx)(f,{width:14,height:14,className:"ml-auto shrink-0"})]})]})};em.displayName="Input.Routes.Countries";let eh=e=>{let{id:t,value:r,country:n,error:l}=e,[a,s]=(0,p.useState)(!1),{dispatchRoutes:i}=(0,p.useContext)(K);return(0,d.jsxs)("label",{className:"form-routes-activity-field",children:[(0,d.jsxs)("span",{className:"form-routes-activity-field-label",children:[(0,d.jsx)("span",{className:"pr-2 truncate ".concat(l&&a?"text-[#FF0000]":""),children:n}),(0,d.jsx)("span",{className:"relative w-[35px] h-[24px] rounded overflow-hidden grid place-items-center place-content-center ml-auto shrink-0",children:(0,d.jsx)(ec,{value:n})})]}),(0,d.jsx)("textarea",{className:"rounded-md border-[1px] p-2 w-full min-h-[150px] block ".concat(l&&a?"border-[#FF0000] border-b-0 rounded-b-none text-[#FF0000]":"border-[#CBCED9]"),value:null!=r?r:"",onClick:()=>s(!0),onFocus:()=>s(!0),onBlur:()=>s(!0),onChange:e=>i({type:"UPDATE_ROUTE",payload:{id:t,activity:e.currentTarget.value}})}),l&&a&&(0,d.jsx)("span",{className:"p-2 px-3 text-[#FF0000] bg-[#FFEFEF] border-[1px] border-t-0 border-[#FF0000] rounded-b-md block",children:l})]},t)};eh.displayName="Input.Routes.Countries.Textarea";let ev=()=>{let{routes:e,errors:t}=(0,p.useContext)(K);return(0,d.jsx)("div",{className:"space-y-2 px-2",children:e.filter(e=>e.country).map(e=>{var r;let{id:n,country:l,activity:a}=e,s=Array.isArray(t)?null===(r=null==t?void 0:t.find(e=>e.id===n&&"MISSING_ACTIVITY"===e.type))||void 0===r?void 0:r.error:t;return(0,d.jsx)(eh,{value:a,error:s,id:n,country:l},n)})})};ev.displayName="Input.Routes.Activities";let eg=(e,t)=>{var r,n,l,a;let{type:s,payload:i}=t;switch(s){case"ADD_ROUTE":return[...e,{id:i.id,activity:null!==(r=i.activity)&&void 0!==r?r:null,country:null!==(n=i.country)&&void 0!==n?n:null}];case"UPDATE_ROUTE":return e.map(e=>e.id===i.id?{...e,activity:null!==(l=i.activity)&&void 0!==l?l:e.activity,country:null!==(a=i.country)&&void 0!==a?a:e.country}:e);case"DELETE_ROUTE":return e.filter(e=>e.id!==i.id);default:return e}},ey=e=>{let{children:t,state:r,errors:n,initialValue:l}=e,[a,s]=null!=r?r:[],[i,o]=(0,p.useReducer)(eg,null!=a?a:null!=l?l:[{id:q(),activity:null,country:null}]);return(0,d.jsx)(K.Provider,{value:{routes:null!=a&&null!=s?a:i,dispatchRoutes:o,errors:n},children:t})};ey.displayName="Input.Routes",ey.Countries=em,ey.Activities=ev;var eb=r(5905);function ew(){return(0,eb.c)({initialValues:{companions:1,children:!1,duration:[new Date(new Date().setHours(0,0,0,0)),new Date(new Date().setHours(24,0,0,0))],routes:[{id:q(),country:null,activity:null,a:{b:{c:{d:1}}}},{id:q(),country:null,activity:null},{id:q(),country:null,activity:null},{id:q(),country:null,activity:null}]},validate:{companions:e=>e<1||isNaN(e)?"Минимальное количество попутчиков должно быть не меньше 1":null,duration:e=>{let t=e.every(e=>null!=e)?O({firstDate:e[0],secondDate:e[1]}):null;return!t||t<1?"Минимальная длительность поездки должна быть не меньше 1 дня":null},routes:e=>{let t=[];return e.some(e=>!e.country)&&t.push(...e.filter(e=>!e.country).map(e=>{let{id:t}=e;return{id:t,type:"MISSING_COUNTRY",error:"Необходимо выбрать хотя бы одну страну"}})),e.some(e=>!e.activity||!e.activity.trim().length)&&t.push(...e.filter(e=>!e.activity).map(e=>{let{id:t}=e;return{id:t,type:"MISSING_ACTIVITY",error:"Необходимо заполнить планы времяпровождения для данной страны"}})),t.length?t:null}}}),(0,d.jsx)("main",{children:(0,d.jsx)("form",{className:"bg-[#D4D9EB] p-5 space-y-5",onSubmit:e=>{e.preventDefault()},children:(0,d.jsxs)(N,{activeStep:1,children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("h2",{className:"text-[#1D2E5B] font-bold text-[24px] leading-none pr-2",children:"Добавить план:"}),(0,d.jsx)(N.Controls,{})]}),(0,d.jsx)(N.Steps,{children:(0,d.jsxs)(ey,{children:[(0,d.jsxs)(N.Step,{number:1,title:"Даты пребывания",description:"Укажите предпочтительное количество попутчиков, которых вы хотели бы позвать в поездку и ее предполагаемую длительность.",children:[(0,d.jsx)(v,{measure:"Чел.",min:1,label:"Ищу попутчиков:"}),(0,d.jsx)(G,{})]}),(0,d.jsx)(N.Step,{number:2,title:"Маршрут",description:"Укажите страны, которые вы хотели посетить. Это может быть одна или сразу несколько.",children:(0,d.jsx)(ey.Countries,{})}),(0,d.jsx)(N.Step,{number:3,title:"Развлечения",description:"Наконец, расскажите о своих планах времяпровождения. Можно писать в свободной форме и ставить тэги.",children:(0,d.jsx)(ey.Activities,{})})]})})]})})})}},6705:function(e,t,r){"use strict";r.d(t,{U:function(){return n}}),r(7294);let n=e=>e}},function(e){e.O(0,[807,774,888,179],function(){return e(e.s=3207)}),_N_E=e.O()}]);