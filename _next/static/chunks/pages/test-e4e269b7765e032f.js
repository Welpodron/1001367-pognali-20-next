(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{1185:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test",function(){return r(3403)}])},5905:function(e,t,r){"use strict";r.d(t,{c:function(){return h}});var l=r(7294);let n=e=>{let t=Array.isArray(e)?[]:{};if("object"!=typeof e||null===e||e instanceof Date)return e;for(let r in e)t[r]=n(e[r]);return t},i=(e,t,r)=>{let l=t.split(".");return void 0!==e[l[0]]&&(1===l.length?"function"==typeof r?(e[l[0]]=r(e[l[0]]),!0):(e[l[0]]=r,!0):i(e[l[0]],l.slice(1).join("."),r))},s=(e,t,r)=>{let l=t.split(".");if(void 0===e[l[0]])return!1;if(1===l.length){if("function"==typeof r)return e[l[0]]=r(e[l[0]]),!0;if(Array.isArray(e[l[0]]))return e[l[0]].push(r),!0;if("object"==typeof e[l[0]]&&"object"==typeof r)return e[l[0]]={...n(e[l[0]]),...n(r)},!0}return s(e[l[0]],l.slice(1).join("."),r)},u=(e,t,r)=>{let l=t.split(".");return void 0!==e[l[0]]&&(1===l.length?("function"==typeof r&&r(e[l[0]]),delete e[l[0]],!0):u(e[l[0]],l.slice(1).join("."),r))},o=(e,t,r)=>{let l=t.split(".");return void 0!==e[l[0]]&&(1===l.length?!!Array.isArray(e[l[0]])&&(void 0!==r&&r>=0?(e[l[0]].splice(r,1),!0):(e[l[0]].pop(),!0)):void 0)},c=(e,t)=>{let r=t.split(".");return void 0===e[r[0]]?void 0:1===r.length?e[r[0]]:c(e[r[0]],r.slice(1).join("."))},d=(e,t,r)=>{let l=n(e);return i(l,t,r),l},a=(e,t,r)=>{let l=n(e);return s(l,t,r),l},f=(e,t,r)=>{let l=n(e);return o(l,t,r),l},h=e=>{let{initialValues:t,validate:r}=e,n=(0,l.useMemo)(()=>t,[t]),[i,s]=(0,l.useState)(!1),[u,o]=(0,l.useState)(t),[h,p]=(0,l.useState)([]),x=(0,l.useCallback)((e,t)=>{p(r=>{if(!t)return r.filter(t=>t.field!==e);let l=r.findIndex(t=>t.field===e);return -1===l?[...r,{field:e,errors:t}]:[...r.slice(0,l),{field:e,errors:t},...r.slice(l+1)]})},[p]),[b,v]=(0,l.useState)([]),j=(0,l.useCallback)((e,t)=>{v(r=>t?[...r.filter(t=>t.field!==e),{field:e,state:t}]:r.filter(t=>t.field!==e))},[v]),y=(0,l.useCallback)(()=>{o(n),v([]),p([])},[n,o,v,p]),k=(0,l.useCallback)(e=>{o(e)},[o]),C=(0,l.useCallback)((e,t)=>{o(r=>d(r,e,t))},[o]),m=(0,l.useCallback)(e=>c(u,e),[u]),g=(0,l.useCallback)((e,t)=>{o(r=>a(r,e,t))},[o]),_=(0,l.useCallback)((e,t)=>{o(r=>f(r,e,t))},[o]),E=(0,l.useCallback)(e=>{var t,r;return{state:[m(e),t=>C(e,t)],touched:[null===(t=b.find(t=>t.field===e))||void 0===t?void 0:t.state,t=>j(e,t)],errors:null===(r=h.find(t=>t.field===e))||void 0===r?void 0:r.errors}},[m,C,b,j,h]);return{values:u,submitted:[i,s],_touched:b,setFieldsTouched:v,setFieldTouched:j,_errors:h,setFieldsErrors:p,setFieldError:x,resetValues:y,setValues:k,setFieldValue:C,getFieldValue:m,getFieldProps:E,insertFieldValue:g,removeFieldValue:_}}},191:function(e,t,r){"use strict";r.d(t,{r:function(){return n}});var l=r(7294);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.useCallback)(e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})},[t])}},3403:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var l=r(5898);let n=e=>(0,l.jsx)("ul",{className:"p-4 bg-slate-200 space-y-2 m-2 rounded",children:Object.keys(e).map((t,r)=>(0,l.jsxs)("li",{children:[(0,l.jsxs)("p",{className:"font-bold text-xs mb-1",children:[t,":"]}),(0,l.jsx)("pre",{className:"italic text-xs leading-none",children:JSON.stringify(e[t],null,2)})]},r))});var i=r(7294);let s=(0,i.createContext)({state:[void 0,()=>{}],touched:[!1,()=>{}],ref:{current:null},errors:[]}),u=e=>{let{children:t,state:r,touched:n,errors:u}=e,[o,c]=n,d=(0,i.useRef)(null),a=(0,i.useCallback)(()=>{c(!0)},[c]);return(0,i.useEffect)(()=>{if(d&&d.current)return d.current.addEventListener("focus",a),()=>{d&&d.current&&d.current.removeEventListener("focus",a)}},[d,a]),(0,l.jsx)(s.Provider,{value:{state:r,touched:n,ref:d,errors:u},children:t})};var o=r(5905),c=r(191);let d=()=>{let{state:e,ref:t,touched:r,errors:u}=(0,i.useContext)(s),[o,d]=e,[a,f]=r,h=(0,i.useRef)(null),p=(0,c.r)(h,t);return(0,l.jsxs)("div",{children:[(0,l.jsx)(n,{errors:u,state:e,touched:r}),(0,l.jsx)("input",{ref:p,value:o,onChange:e=>d(e.target.value),className:"p-2 bg-red-300"}),(0,l.jsx)("button",{type:"button",onClick:()=>f(!1),children:"Untouch"})]})};function a(){let e=(0,o.c)({initialValues:{a:{b:{c:123},d:["",2,{example:123}]}}});return(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{onClick:()=>e.setFieldTouched("a.b.c",!1),type:"button",children:"Untouch a.b.c"}),(0,l.jsx)("button",{onClick:()=>e.setFieldTouched("a.d.2.example",!1),type:"button",children:"Untouch a.d.2.example"}),(0,l.jsx)("button",{type:"button",onClick:()=>e.setFieldsTouched([]),children:"Untouch all fields"}),(0,l.jsx)("button",{type:"button",onClick:()=>e.setFieldError("a.d.2.example",["1233"]),children:"Trigger a.d.2.example error"}),(0,l.jsx)(n,{formErrors:e._errors,formTouchedFields:e._touched,formValues:e.values}),(0,l.jsx)("div",{children:(0,l.jsx)(u,{...e.getFieldProps("a.b.c"),children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"123"}),(0,l.jsx)(d,{})]})})}),(0,l.jsx)("div",{children:(0,l.jsxs)(u,{...e.getFieldProps("a.d.2.example"),children:[(0,l.jsx)("p",{children:"321"}),(0,l.jsx)(d,{})]})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1185)}),_N_E=e.O()}]);